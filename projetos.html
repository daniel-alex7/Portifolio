<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projetos - Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" type='text/css' href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css" />
</head>
<body>

    <header class="main-header">
        <div class="logo">Daniel Silva</div>
        <nav>
            <a href="index.html">Home</a>
            <a href="habilidades.html">Habilidades</a>
            <a href="projetos.html">Projetos</a>
            <a href="contatos.html">Contato</a>
        </nav>
    </header>

    <main>
        <section id="projects">
            <h2 class="section-title">Meus Projetos</h2>
            <p style="text-align: center; margin-bottom: 20px;">
                Confira meus repositórios públicos diretamente do GitHub. 
                <a href="https://github.com/daniel-alex7?tab=repositories" target="_blank" style="color: var(--accent-color); font-weight: bold;">Ver perfil completo <i class="fas fa-external-link-alt"></i></a>
            </p>
            
            <div class="filter-container">
                <button class="filter-btn active" data-filter="all">Todos</button>
                <button class="filter-btn" data-filter="backend">Back-end</button>
                <button class="filter-btn" data-filter="frontend">Front-end</button>
                <button class="filter-btn" data-filter="data">Dados</button>
            </div>

            <div class="cards" id="projects-container">
                <!-- Os projetos serão carregados aqui via JavaScript -->
                <p id="loading-text" style="width: 100%; text-align: center;">Carregando projetos...</p>
            </div> 
        </section>
    </main>
    <script src="script.js"></script>
    <script>
        // Script para carregar projetos do GitHub
        document.addEventListener('DOMContentLoaded', () => {
            const username = 'daniel-alex7';
            const container = document.getElementById('projects-container');
            const loadingText = document.getElementById('loading-text');

            fetch(`https://api.github.com/users/${username}/repos?sort=updated`)
                .then(response => response.json())
                .then(repos => {
                    loadingText.style.display = 'none';
                    
                    if (!Array.isArray(repos) || repos.length === 0) {
                        container.innerHTML = '<p>Nenhum projeto público encontrado.</p>';
                        return;
                    }

                    repos.forEach(repo => {
                        // Ignorar forks se desejar, removendo o comentário abaixo
                        // if (repo.fork) return;

                        // Determinar categoria baseada na linguagem
                        let category = 'all';
                        const lang = repo.language ? repo.language.toLowerCase() : '';

                        // Mapa de ícones (Devicon)
                        const languageIcons = {
                            'javascript': 'devicon-javascript-plain colored',
                            'typescript': 'devicon-typescript-plain colored',
                            'python': 'devicon-python-plain colored',
                            'java': 'devicon-java-plain colored',
                            'c#': 'devicon-csharp-plain colored',
                            'php': 'devicon-php-plain colored',
                            'html': 'devicon-html5-plain colored',
                            'css': 'devicon-css3-plain colored',
                            'vue': 'devicon-vuejs-plain colored',
                            'react': 'devicon-react-original colored',
                            'c++': 'devicon-cplusplus-plain colored',
                            'c': 'devicon-c-plain colored',
                            'go': 'devicon-go-original-wordmark colored',
                            'ruby': 'devicon-ruby-plain colored',
                            'swift': 'devicon-swift-plain colored',
                            'kotlin': 'devicon-kotlin-plain colored',
                            'rust': 'devicon-rust-plain colored',
                            'dart': 'devicon-dart-plain colored',
                            'shell': 'devicon-bash-plain colored',
                            'jupyter notebook': 'devicon-jupyter-plain colored',
                            'sql': 'devicon-mysql-plain colored'
                        };
                        
                        // Mapa de Backgrounds (Gradients baseados na linguagem)
                        const languageBackgrounds = {
                            'javascript': 'linear-gradient()',
                            'typescript': 'linear-gradient()',
                            'python': 'linear-gradient()',
                            'java': 'linear-gradient()',
                            'c#': 'linear-gradient()',
                            'php': 'linear-gradient()',
                            'html': 'linear-gradient()',
                            'css': 'linear-gradient()',
                            'vue': 'linear-gradient()',
                            'react': 'linear-gradient()',
                            'sql': 'linear-gradient()',
                            'kotlin': 'linear-gradiente()'
                        };

                        const iconClass = languageIcons[lang] || 'fas fa-code';
                        const bgStyle = languageBackgrounds[lang] || 'linear-gradient(135deg, #1e293b 0%, #38bdf8 100%)';
                        
                        if (['javascript', 'typescript', 'java', 'python', 'php', 'go', 'ruby', 'c#'].includes(lang)) {
                            category = 'backend'; // Simplificação, pode ajustar
                        }
                        if (['html', 'css', 'vue', 'react', 'svelte'].includes(lang)) {
                            category = 'frontend';
                        }
                        if (['jupyter notebook', 'r', 'sql'].includes(lang)) {
                            category = 'data';
                        }

                        // Criar o card HTML
                        const card = document.createElement('div');
                        card.className = 'card project-card';
                        card.setAttribute('data-category', category);
                        
                        // Descrição curta (limite de caracteres)
                        const description = repo.description || 'Sem descrição fornecida.';
                        
                        card.innerHTML = `
                            <div class="card-image" style="background: ${bgStyle};">
                                <i class="${iconClass} card-image-icon"></i>
                            </div>
                            <h3>${repo.name}</h3>
                            <p>${description}</p>
                            <div class="tech-stack">
                                ${repo.language ? `<span class="tech-tag"><i class="${iconClass}"></i> ${repo.language}</span>` : ''}
                                <span class="tech-tag"><i class="fab fa-github"></i> GitHub</span>
                            </div>
                            <a href="${repo.html_url}" target="_blank" class="btn-modern">Ver Código</a>
                        `;
                        
                        container.appendChild(card);
                    });

                })
                .catch(error => {
                    console.error('Erro ao carregar projetos:', error);
                    loadingText.innerText = 'Erro ao carregar projetos do GitHub.';
                });
        });
    </script>
</body>
</html>